<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="https://www.thymeleaf.org/thymeleaf-extras-springsecurity6"
      lang="hu">
<head>
    <link rel="stylesheet" href="/css/purchases.css" type="text/css">
    <meta charset="UTF-8">
    <title>Vásárlások</title>
</head>
<body>
<div class="center back_btn"><a id="back_btn" th:href="@{/}">Vissza</a></div>

<div class="container">
    <div class="card" th:each="file : ${files}">
        <a id="card-link" th:href="@{/files/{id}(id=${file.id})}">
            <div class="files-container">
                <h4 style="text-align: center" th:text="${file.name}"></h4>
                <h3 th:text="${file.price} + 'Ft'"></h3>
                <p th:text="'Leírás: ' + ${file.description}"
                   style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis"></p>
                <p th:text="'Feltöltő: ' + ${file.uploader.username}"></p>
            </div>
            <div class="edit">
                <form th:if="${file.uploader.id} == ${user.getId()}" th:action="@{/files/edit/{id}(id=${file.id})}"
                      method="post">
                    <button>Szerkesztés</button>
                </form>
                <form th:if="${file.uploader.id} == ${user.id}" th:action="@{'/files/' + ${file.id}}"
                      onclick="confirmDelete()" method="post">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit">Törlés</button>
                </form>
                <form th:action="@{'/download/' + ${file.id}}" method="get">
                    <button type="submit">Megtekintés</button>
                </form>
            </div>
        </a>
    </div>
</div>


<!--<div class="center">-->
<!--    <h1 class="center">Megvásárolt tananyagok</h1>-->
<!--    <table class="center table">-->
<!--        <thead>-->
<!--        <tr>-->
<!--            <th>Név</th>-->
<!--            <th>Típus</th>-->
<!--            <th>Méret</th>-->
<!--            <th>Ár</th>-->
<!--            <th>Leírás</th>-->
<!--            <th>Feltöltő</th>-->
<!--&lt;!&ndash;        <th th:if="${role} == 'ADMIN'">Módosítás</th>&ndash;&gt;-->
<!--        </tr>-->
<!--        </thead>-->
<!--        <tbody>-->
<!--        <tr th:each="file : ${files}">-->
<!--            <td th:text="${file.name}"></td>-->
<!--            <td th:text="${file.type}"></td>-->
<!--            <td th:text="${file.size}"></td>-->
<!--            <td th:text="${file.price}"></td>-->
<!--            <td th:text="${file.description}"></td>-->
<!--            <td th:text="${file.uploader.username}"></td>-->
<!--            <td><a th:if="${file.uploader.id} == ${user.getId()}" th:href="@{/files/edit/{id}(id=${file.id})}">Szerkesztés</a>-->
<!--            </td>-->
<!--            <td><a th:href="${file.url}" target="_blank">Letöltés</a></td>-->
<!--            <td>-->
<!--                <form th:if="${file.uploader.id} == ${user.id}" th:action="@{'/files/' + ${file.id}}" method="post">-->
<!--                    <input type="hidden" name="_method" value="delete"/>-->
<!--                    <button type="submit">Törlés</button>-->
<!--                </form>-->
<!--            </td>-->
<!--        </tr>-->
<!--        </tbody>-->
<!--    </table>-->
<!--</div>-->

</body>
</html>